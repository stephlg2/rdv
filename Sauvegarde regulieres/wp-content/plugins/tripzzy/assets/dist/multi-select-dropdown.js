(()=>{"use strict";const e=window.wp.i18n;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var o=function(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({search:!1,placeholder:(0,e.__)("Select","tripzzy"),txtSearch:(0,e.__)("Search...","tripzzy"),allowMultiple:!1},o);document.querySelectorAll("select[multiple].tripzzy-multiselect, .tripzzy-advanced-search-form select[multiple]").forEach((function(e){e.style.display="none";var t="true"===e.dataset.allowMultiple||c.allowMultiple,r="true"===e.dataset.hasSearch||c.search,n=document.createElement("div");n.className="tripzzy-dropdown-wrapper ",e.insertAdjacentElement("afterend",n);var o=document.createElement("input");o.type="text",o.className="tripzzy-input sm",o.placeholder=e.dataset.placeholder||c.placeholder,o.readOnly=!0,n.appendChild(o);var a=document.createElement("div");a.className="tripzzy-dropdown-list",n.appendChild(a);var l=document.createElement("input");l.type="text",l.className="tripzzy-dropdown-searchbox ".concat(r?"":"hidden"),l.placeholder=c.txtSearch,a.appendChild(l);var i=document.createElement("div");i.className="tripzzy-options-container",a.appendChild(i);var s=function(){var r=Array.from(e.selectedOptions);r.length?o.value=t?r.map((function(e){return e.text})).join(", "):r[0].text:o.value=e.dataset.placeholder||c.placeholder};l.addEventListener("input",(function(){var e=l.value.toLowerCase();i.querySelectorAll(".tripzzy-dropdown-item").forEach((function(t){var r=t.querySelector(".tripzzy-dropdown-label").textContent.toLowerCase();t.style.display=r.includes(e)?"block":"none"}))})),l.addEventListener("click",(function(e){e.stopPropagation()})),n.addEventListener("click",(function(e){var t;e.stopPropagation(),t=n,document.querySelectorAll(".tripzzy-dropdown-wrapper.show").forEach((function(e){e!==t&&e.classList.remove("show")})),n.classList.toggle("show"),n.classList.contains("show")&&r&&(l.value="",setTimeout((function(){l.focus()}),10),l.dispatchEvent(new Event("input")))})),document.addEventListener("click",(function(e){n.contains(e.target)||n.classList.remove("show")})),function(){i.innerHTML="";var r=document.createDocumentFragment();Array.from(e.options).forEach((function(a){if(a.value){a.selected&&!a.dataset.default&&(a.dataset.default="true");var l=document.createElement("div");l.className="tripzzy-dropdown-item ".concat(a.selected?"checked":"");var d=document.createElement("input");d.type="checkbox",d.checked=a.selected,d.className="tripzzy-input-checkbox";var p=document.createElement("label");p.textContent=a.text,p.className="tripzzy-dropdown-label",l.appendChild(d),l.appendChild(p),r.appendChild(l),l.addEventListener("click",(function(r){if(r.stopPropagation(),t)a.selected=!a.selected,d.checked=a.selected,l.classList.toggle("checked",a.selected);else{var p=a.selected;Array.from(e.options).forEach((function(e){return e.selected=!1})),i.querySelectorAll(".checked").forEach((function(e){e.classList.remove("checked"),e.querySelector("input").checked=!1})),p?(a.selected=!1,o.value=c.placeholder):(a.selected=!0,d.checked=!0,l.classList.add("checked"),o.value=a.text)}e.dispatchEvent(new Event("change",{bubbles:!0})),s(),n.classList.remove("show")}))}})),i.appendChild(r)}(),s()})),(t=document.getElementById("tripzzy-filter-form"))&&t.addEventListener("reset",(function(){setTimeout((function(){document.querySelectorAll("select[multiple].tripzzy-multiselect").forEach((function(e){var t=e.nextElementSibling;if(t&&t.classList.contains("tripzzy-dropdown-wrapper")){t.querySelectorAll(".tripzzy-dropdown-item").forEach((function(t){var r=Array.from(e.options).find((function(e){return e.textContent.trim()===t.textContent.trim()})),n=t.querySelector(".tripzzy-input-checkbox");r&&"true"===r.dataset.default?(r.selected=!0,t.classList.add("checked"),n.checked=!0):(r.selected=!1,t.classList.remove("checked"),n.checked=!1)}));var r=t.querySelector(".tripzzy-input.sm"),n=Array.from(e.selectedOptions).map((function(e){return e.text}));r.value=n.length?n.join(", "):e.dataset.placeholder||"Select"}}))}),10)}))};window.addEventListener("DOMContentLoaded",o),window.TripzzyMultiSelectDropdown=o})();